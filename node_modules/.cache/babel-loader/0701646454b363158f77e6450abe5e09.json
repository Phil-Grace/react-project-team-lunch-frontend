{"ast":null,"code":"var _jsxFileName = \"/Users/gracetan/Development/module-projects/module_four_team_lunch/react-project-team-lunch-frontend/src/team/TeamContainer.js\";\nimport React, { Component } from \"react\";\nimport TeamForm from \"./TeamForm\";\nimport MemberContainer from \"./MemberContainer\";\nexport default class TeamContainer extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      team_name: \"\",\n      location: \"\",\n      searchInput: \"\",\n      members: [],\n      showTeamForm: true\n    };\n\n    this.saveTeamMembers = () => {\n      // TODO Take array of members and run POST requests to the user_teams url\n      const fetchUserTeams = this.props.fetchURL + \"/user_teams\"; // console.log(this.state.members)\n\n      this.state.members.forEach(member => {\n        fetch(fetchUserTeams, {\n          method: \"POST\",\n          headers: {\n            \"content-type\": \"application/json\",\n            Authorization: \"Bearer \".concat(localStorage.token)\n          },\n          body: JSON.stringify({\n            user_id: member.id,\n            team_id: this.props.currentTeam.id\n          })\n        }).then(res => res.json()).then(newMember => console.log(newMember)).catch(err => console.log(err));\n      });\n      this.setState({\n        showTeamForm: !this.state.showTeamForm\n      });\n      this.props.selectContainer();\n    };\n\n    this.addATeam = (e, team) => {\n      const fetchTeams = this.props.fetchURL + \"/teams\";\n      const allTeams = this.props.allTeams;\n      this.setState({\n        team_name: team.teamNameInput\n      });\n      const teamCheck = this.state.team_name.length > 0 ? true : false;\n      teamCheck ? fetch(fetchTeams, {\n        method: \"POST\",\n        headers: {\n          \"content-type\": \"application/json\",\n          Authorization: \"Bearer \".concat(localStorage.token)\n        },\n        body: JSON.stringify({\n          team_name: team.teamNameInput\n        })\n      }).then(res => res.json()).then(team => {\n        this.props.getCurrentTeam(team);\n        this.setState({\n          team_name: team.teamNameInput,\n          showTeamForm: !this.state.showTeamForm\n        });\n      }) : console.log(\"failed\");\n    };\n\n    this.addMember = (e, member) => {\n      const memberCheck = this.state.members.includes(member);\n\n      if (!memberCheck) {\n        this.setState({\n          members: [...this.state.members, member]\n        });\n      }\n    };\n\n    this.removeMember = (e, member) => {\n      const newMemberArray = [];\n      this.state.members.forEach(user => {\n        if (user !== member) {\n          newMemberArray.push(user);\n        }\n      });\n      this.setState({\n        members: newMemberArray\n      });\n    };\n\n    this.handleChange = (e, value) => {\n      this.setState({\n        searchInput: value\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.props.fetchCurrentUser();\n    this.props.fetchUsers();\n    this.props.fetchTeams();\n    this.setState({\n      members: [this.props.currentUser]\n    });\n    console.log(\"team\");\n  }\n\n  render() {\n    const _this$props = this.props,\n          allUsers = _this$props.allUsers,\n          currentUser = _this$props.currentUser,\n          teamError = _this$props.teamError;\n    const _this$state = this.state,\n          searchInput = _this$state.searchInput,\n          members = _this$state.members,\n          team_name = _this$state.team_name,\n          location = _this$state.location,\n          showTeamForm = _this$state.showTeamForm;\n    const removeCurrentUserArray = allUsers ? allUsers.filter(member => member.id !== currentUser.id) : null; // console.log(removeCurrentUserArray)\n\n    const filteredUsers = searchInput ? removeCurrentUserArray.filter(user => user.username.includes(searchInput)) : null; // console.log(currentUser);\n\n    return React.createElement(\"div\", {\n      className: \"team-form-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, showTeamForm ? React.createElement(TeamForm, {\n      currentUser: currentUser,\n      addATeam: this.addATeam,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }) : React.createElement(MemberContainer, {\n      currentUser: currentUser,\n      members: members,\n      removeMember: this.removeMember,\n      team_name: team_name,\n      location: location,\n      handleChange: this.handleChange,\n      saveTeamMembers: this.saveTeamMembers,\n      addMember: this.addMember,\n      filteredUsers: filteredUsers,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }));\n  }\n\n}","map":{"version":3,"sources":["/Users/gracetan/Development/module-projects/module_four_team_lunch/react-project-team-lunch-frontend/src/team/TeamContainer.js"],"names":["React","Component","TeamForm","MemberContainer","TeamContainer","state","team_name","location","searchInput","members","showTeamForm","saveTeamMembers","fetchUserTeams","props","fetchURL","forEach","member","fetch","method","headers","Authorization","localStorage","token","body","JSON","stringify","user_id","id","team_id","currentTeam","then","res","json","newMember","console","log","catch","err","setState","selectContainer","addATeam","e","team","fetchTeams","allTeams","teamNameInput","teamCheck","length","getCurrentTeam","addMember","memberCheck","includes","removeMember","newMemberArray","user","push","handleChange","value","componentDidMount","fetchCurrentUser","fetchUsers","currentUser","render","allUsers","teamError","removeCurrentUserArray","filter","filteredUsers","username"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport TeamForm from \"./TeamForm\";\nimport MemberContainer from \"./MemberContainer\";\n\nexport default class TeamContainer extends Component {\n  state = {\n    team_name: \"\",\n    location: \"\",\n    searchInput: \"\",\n    members: [],\n    showTeamForm: true\n  };\n\n  componentDidMount() {\n    this.props.fetchCurrentUser();\n    this.props.fetchUsers();\n    this.props.fetchTeams();\n    this.setState({ members: [this.props.currentUser] });\n    console.log(\"team\");\n  }\n\n  saveTeamMembers = () => {\n    // TODO Take array of members and run POST requests to the user_teams url\n    const fetchUserTeams = this.props.fetchURL + \"/user_teams\";\n    // console.log(this.state.members)\n    this.state.members.forEach(member => {\n      fetch(fetchUserTeams, {\n        method: \"POST\",\n        headers: {\n          \"content-type\": \"application/json\",\n          Authorization: `Bearer ${localStorage.token}`\n        },\n        body: JSON.stringify({\n          user_id: member.id,\n          team_id: this.props.currentTeam.id\n        })\n      })\n        .then(res => res.json())\n        .then(newMember => console.log(newMember))\n        .catch(err => console.log(err));\n    });\n    this.setState({ showTeamForm: !this.state.showTeamForm });\n    this.props.selectContainer();\n  };\n\n  addATeam = (e, team) => {\n    const fetchTeams = this.props.fetchURL + \"/teams\";\n    const { allTeams } = this.props;\n    this.setState({\n      team_name: team.teamNameInput\n    });\n    const teamCheck = this.state.team_name.length > 0 ? true : false;\n    teamCheck\n      ? fetch(fetchTeams, {\n          method: \"POST\",\n          headers: {\n            \"content-type\": \"application/json\",\n            Authorization: `Bearer ${localStorage.token}`\n          },\n          body: JSON.stringify({\n            team_name: team.teamNameInput\n          })\n        })\n          .then(res => res.json())\n          .then(team => {\n            this.props.getCurrentTeam(team);\n            this.setState({\n              team_name: team.teamNameInput,\n              showTeamForm: !this.state.showTeamForm\n            });\n          })\n      : console.log(\"failed\");\n  };\n\n  addMember = (e, member) => {\n    const memberCheck = this.state.members.includes(member);\n    if (!memberCheck) {\n      this.setState({ members: [...this.state.members, member] });\n    }\n  };\n\n  removeMember = (e, member) => {\n    const newMemberArray = [];\n    this.state.members.forEach(user => {\n      if (user !== member) {\n        newMemberArray.push(user);\n      }\n    });\n    this.setState({ members: newMemberArray });\n  };\n\n  handleChange = (e, value) => {\n    this.setState({ searchInput: value });\n  };\n\n  render() {\n    const { allUsers, currentUser, teamError } = this.props;\n    const {\n      searchInput,\n      members,\n      team_name,\n      location,\n      showTeamForm\n    } = this.state;\n    const removeCurrentUserArray = allUsers\n      ? allUsers.filter(member => member.id !== currentUser.id)\n      : null;\n    // console.log(removeCurrentUserArray)\n    const filteredUsers = searchInput\n      ? removeCurrentUserArray.filter(user =>\n          user.username.includes(searchInput)\n        )\n      : null;\n    // console.log(currentUser);\n    return (\n      <div className=\"team-form-container\">\n        {showTeamForm ? (\n          <TeamForm currentUser={currentUser} addATeam={this.addATeam} />\n        ) : (\n          <MemberContainer\n            currentUser={currentUser}\n            members={members}\n            removeMember={this.removeMember}\n            team_name={team_name}\n            location={location}\n            handleChange={this.handleChange}\n            saveTeamMembers={this.saveTeamMembers}\n            addMember={this.addMember}\n            filteredUsers={filteredUsers}\n          />\n        )}\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}